local MelotenHeader = {}

local HEADER = [[--[[This file was protected using Meloten Obfuscator
v0.0.1]]
]]

local ANTI_DEBUG = [[
-- Meloten Anti-Debug & Anti-Tamper
do
    local function crash() while true do end end
    local dbg = debug
    if dbg then
        if dbg.getinfo(3) or dbg.getregistry() ~= _G or type(dbg.gethook) == "function" then
            crash()
        end
    end
    if getfenv and getfenv(0) ~= _G then crash() end
    if loadstring and loadstring("return 1") == nil then crash() end
end
]]

function MelotenHeader:Apply(code, config)
    -- code здесь уже после всех основных шагов (строка)
    return HEADER .. "\n" .. ANTI_DEBUG .. "\n\n" .. code
end

return MelotenHeader
