-- Meloten Ultra - Максимальная защита от деобфускации
-- Добавьте этот пресет в meloten.lua

UltraStrong = {
    LuaVersion = "Lua51",
    VarNamePrefix = "",
    NameGenerator = "MangledShuffled",
    PrettyPrint = false,
    Seed = math.random(1, 9999999),
    Steps = {
        -- 1. Анти-деобфускация (новый step)
        {
            Name = "AntiDeobfuscation",
            Settings = {
                deadCodeCount = 10,      -- Много мусорного кода
                trapCount = 5,           -- Много ловушек
                antiPatternCount = 4,    -- Анти-паттерны
            }
        },
        
        -- 2. Анти-отладка
        {
            Name = "AntiDebug",
            Settings = {
                snippetCount = 4,
            }
        },
        
        -- 3. Многослойное шифрование строк
        {
            Name = "MultiLayerStringEncrypt",
            Settings = {}
        },
        
        -- 4. Максимальная VM виртуализация
        {
            Name = "Vmify",
            Settings = {
                IntensityIndex = 250,  -- ЕЩЁ СИЛЬНЕЕ
            }
        },
        
        -- 5. Константный массив
        {
            Name = "ConstantArray",
            Settings = {
                Treshold = 1,
                StringsOnly = false,
                Shuffle = true,
                Rotate = true,
                LocalWrapperTreshold = 1,
                LocalWrapperArgCount = 5,  -- Больше аргументов
                LocalWrapperCount = 3,     -- Больше обёрток
            }
        },
        
        -- 6. Проксирование локальных переменных
        {
            Name = "ProxifyLocals",
            Settings = {
                Treshold = 1,
            }
        },
        
        -- 7. Разделение строк
        {
            Name = "SplitStrings",
            Settings = {
                Treshold = 1,
            }
        },
        
        -- 8. Числа в выражения
        {
            Name = "NumbersToExpressions",
        },
        
        -- 9. Обфускация потока управления
        {
            Name = "ControlFlowFlatten",
            Settings = {
                complexity = 8,  -- Максимальная сложность
            }
        },
        
        -- 10. Обёртка в функции (несколько раз)
        {
            Name = "WrapInFunction",
        },
        {
            Name = "WrapInFunction",  -- Двойная обёртка
        },
        
        -- 11. Финальное шифрование строк
        {
            Name = "EncryptStrings",
        },
    }
}

-- Meloten Paranoid - Для абсолютной защиты (медленный)
Paranoid = {
    LuaVersion = "Lua51",
    VarNamePrefix = "",
    NameGenerator = "MangledShuffled",
    PrettyPrint = false,
    Seed = math.random(1, 99999999),
    Steps = {
        -- Анти-деобфускация с максимальными настройками
        {
            Name = "AntiDeobfuscation",
            Settings = {
                deadCodeCount = 20,
                trapCount = 10,
                antiPatternCount = 8,
            }
        },
        
        -- Тройная анти-отладка
        {
            Name = "AntiDebug",
            Settings = {snippetCount = 4}
        },
        
        -- Многослойное шифрование
        {
            Name = "MultiLayerStringEncrypt",
            Settings = {}
        },
        
        -- МАКСИМАЛЬНАЯ виртуализация
        {
            Name = "Vmify",
            Settings = {IntensityIndex = 300}
        },
        
        -- Константный массив
        {
            Name = "ConstantArray",
            Settings = {
                Treshold = 1,
                StringsOnly = false,
                Shuffle = true,
                Rotate = true,
                LocalWrapperTreshold = 1,
                LocalWrapperArgCount = 7,
                LocalWrapperCount = 5,
            }
        },
        
        -- Проксирование
        {
            Name = "ProxifyLocals",
            Settings = {Treshold = 1}
        },
        
        -- Разделение строк
        {
            Name = "SplitStrings",
            Settings = {Treshold = 1}
        },
        
        -- Числа в выражения
        {
            Name = "NumbersToExpressions",
        },
        
        -- Control flow
        {
            Name = "ControlFlowFlatten",
            Settings = {complexity = 10}  -- МАКСИМУМ
        },
        
        -- ТРОЙНАЯ обёртка
        {
            Name = "WrapInFunction",
        },
        {
            Name = "WrapInFunction",
        },
        {
            Name = "WrapInFunction",
        },
        
        -- Финальное шифрование
        {
            Name = "EncryptStrings",
        },
        
        -- Ещё раз виртуализация для усиления
        {
            Name = "Vmify",
            Settings = {IntensityIndex = 100}
        },
    }
}
